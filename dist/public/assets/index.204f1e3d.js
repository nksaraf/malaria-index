import{F as we,c as L,a as j,b as q,d as be,i as H,g,e as I,f as b,h as k,S as N,j as $e,k as E,s as p,t as v,o as _e}from"./entry-client.52738a5b.js";class F extends Error{constructor(e,{status:r,stack:t}={}){super(e),this.name="ServerError",this.status=r||400,t&&(this.stack=t)}}class ye extends F{constructor(e,{fieldErrors:r={},form:t,fields:s,stack:x}={}){super(e,{stack:x}),this.formError=e,this.name="FormError",this.fields=s||Object.fromEntries(typeof t<"u"?t.entries():[])||{},this.fieldErrors=r}}const m="Location",D="content-type",Se="x-solidstart-response-type",Ce="x-solidstart-content-type",je="x-solidstart-origin",ke="application/json";function O(i,e=302){let r=e;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302),i===""&&(i="/");let t=new Headers(r.headers);return t.set(m,i),new Response(null,{...r,headers:t})}async function V(i,e){const r=e.headers.get(Ce)||e.headers.get(D)||"";if(r.includes("json"))return await e.json();if(r.includes("text"))return await e.text();if(r.includes("server-error")){const t=await e.json();return new F(t.error.message,{stack:t.error.stack,status:e.status})}else if(r.includes("form-error")){const t=await e.json();return new ye(t.error.message,{fieldErrors:t.error.fieldErrors,fields:t.error.fields,stack:t.error.stack})}else if(r.includes("error")){const t=await e.json(),s=new Error(t.error.message);return t.error.stack&&(s.stack=t.error.stack),s}else{if(r.includes("response"))return e.status===204&&e.headers.get(m)?O(e.headers.get(m)):e;if(e.status===200){const t=await e.text();try{return JSON.parse(t)}catch{}}return e.status===204&&e.headers.get(m)?O(e.headers.get(m)):e}}const h=i=>{throw new Error("Should be compiled away")};function Ee(...i){let e,r={[je]:"client"};if(i[0]instanceof FormData)e=i[0];else{if(Array.isArray(i)&&i.length>2){let t=i[1];typeof t=="object"&&"value"in t&&"refetching"in t&&(t.value=void 0)}e=JSON.stringify(i,(t,s)=>s&&typeof s=="object"&&s.$type===we?{$type:"fetch_event"}:s instanceof Headers?{$type:"headers",values:[...s.entries()]}:s instanceof Request?{$type:"request",url:s.url,method:s.method,headers:s.headers}:s),r[D]=ke}return{method:"POST",body:e,headers:new Headers({...r})}}h.createFetcher=i=>{let e=function(...r){const t=Ee(...r);return h.call(i,t)};return e.url=i,e.fetch=r=>h.call(i,r),e};h.call=async function(i,e){const r=new Request(new URL(i,window.location.href).href,e),t=await fetch(r);if(t.headers.get(Se)==="throw")throw await V(r,t);return await V(r,t)};h.fetch=async function(i,e){if(i instanceof URL||i.startsWith("http"))return await fetch(i,e);const r=new Request(new URL(i,window.location.href).href,e);return await fetch(r)};const Re=v('<div class="w-full bg-white rounded-md pt-3 text-center flex items-center justify-center bg-opacity-90  rounded-t-none shadow-lg text-slate-500  font-bold text-lg"></div>'),Me=v('<div class="w-full rounded-t-none bg-white py-3 rounded-md text-center flex items-center justify-center bg-opacity-90  shadow-lg  font-bold text-lg"><div class="flex items-center flex-row w-full px-4 space-x-2"><img src="/malaria.png" width="32" height="32"><div class="flex-1 bg-gradient-to-r from-blue-500 via-green-500 to-red-500 h-4 rounded-md relative"><div class="absolute bg-white h-7 -top-[35%] w-3 rounded-lg border-[3px] border-black"></div></div><img src="/malaria_many.png" width="32" height="32"></div></div>'),Te=v('<div class="w-full mt-4 bg-white py-3 rounded-md text-center flex flex-col space-y-6 bg-opacity-90  shadow-lg  font-bold text-2xl"><div><div class="text-sm text-slate-400">Vegetation</div><div class="flex items-center flex-row w-full px-5 space-x-3"><img src="/water.png" width="24" height="24"><div class="flex-1 bg-gradient-to-r from-emerald-100 via-emerald-400 to-emerald-900 h-3 rounded-md relative"><div class="absolute bg-white h-6 -top-[35%] w-3 rounded-lg border-[3px] border-black"></div></div><img src="/trees.png" width="24" height="24"></div></div><div><div class="text-sm text-slate-400">Population</div><div class="flex items-center flex-row w-full px-5 space-x-3"><img src="/person.png" width="24" height="24"><div class="flex-1 bg-gradient-to-r from-amber-100 via-amber-400 to-amber-900 h-3 rounded-md relative"><div class="absolute bg-white h-6 -top-[35%] w-3 rounded-lg border-[3px] border-black"></div></div><img src="/people.png" width="24" height="24"></div></div><div><div class="text-sm text-slate-400">Rainfall</div><div class="flex items-center flex-row w-full px-5 space-x-3"><img src="/desert.png" width="24" height="24"><div class="flex-1 bg-gradient-to-r from-cyan-100 via-cyan-500 to-cyan-900 h-3 rounded-md relative"><div class="absolute bg-white h-6 -top-[35%] w-3 rounded-lg border-[3px] border-black"></div></div><img src="/rain.png" width="24" height="24"></div></div><div><div class="text-sm text-slate-400">Surface Temperature</div><div class="flex items-center flex-row w-full px-5 space-x-3"><img src="/cold.png" width="24" height="24"><div class="flex-1 bg-gradient-to-r from-blue-500 via-yellow-500 to-red-500 h-3 rounded-md relative"><div class="absolute bg-white h-6 -top-[35%] w-3 rounded-lg border-[3px] border-black"></div></div><img src="/hot.png" width="24" height="24"></div></div><div><div class="text-sm text-slate-400">Canopy Cover</div><div class="flex items-center flex-row w-full px-5 space-x-3"><img src="/flat-water.png" width="24" height="24"><div class="flex-1 bg-gradient-to-r from-lime-100 via-lime-500 to-lime-900 h-3 rounded-md relative"><div class="absolute bg-white h-6 -top-[35%] w-3 rounded-lg border-[3px] border-black"></div></div><img src="/canopy.png" width="24" height="24"></div></div></div>'),Le=v('<div class="fixed top-24 left-4 w-[320px]"><div class="w-full py-2 rounded-b-none rounded-md text-center flex items-center justify-center bg-opacity-80 bg-red-600 shadow-lg text-red-50 font-bold text-xl"><div>Malaria Risk Index (MRI)</div></div><div><!#><!/><!#><!/></div></div>'),qe=v('<div class="fixed left-[50vw] -translate-x-[50%] top-4 flex flex-row space-x-2"><div class="bg-white border-[3px] w-[180px] shadow-lg rounded-md flex flex-row justify-center items-center"><select class="font-semibold text-lg py-1"><option>Karnataka</option><option>Bihar</option><option>Delhi</option><option>Haryana</option><option>Rajasthan</option></select></div><div class="bg-white w-[180px] border-[3px]   shadow-lg rounded-md flex flex-row justify-center items-center"><div class="font-semibold text-lg py-1"></div></div></div>'),He=v('<div class="w-full bg-white py-3 rounded-md text-center flex items-center justify-center bg-opacity-90  rounded-t-none shadow-lg  font-bold text-2xl"><div class="flex items-center flex-row w-full px-4 space-x-2"><img src="/malaria.png" width="32" height="32"><div class="flex-1 h-4 rounded-md bg-gray-700 animate-pulse relative"></div><img src="/malaria_many.png" width="32" height="32"></div></div>');function Ne(){const[i,e]=L("Bihar"),[r]=j(i,async n=>await(await h.fetch(`/api/center?state=${n}`)).json()),[t,s]=L(null);q(()=>{if(t()){const n=new google.maps.Marker({position:t(),map:x()});_e(()=>{n.setMap(null)})}});const x=be(()=>{if(console.log("heree",r(),H),!r()||H)return;console.log("heree");const n=document.getElementById("map-container");console.log(r());const l=new google.maps.Map(n,{center:{lat:r().coordinates[1],lng:r().coordinates[0]},zoom:9});return l.addListener("click",a=>{console.log(a),s(a.latLng)}),l}),[f]=j(t,async n=>n?await(await h.fetch(`/api/mapid?state=${i()}&lat=${n.lat()}&lng=${n.lng()}`)).json():void 0);q(()=>{if(!x())return;const n=l=>{const a=new ee.layers.EarthEngineTileSource({mapid:l}),u=new ee.layers.ImageOverlay(a);x().overlayMapTypes.push(u)};fetch(`/api/mapid?state=${i()}`).then(l=>l.text()).then(l=>n(l))});const[z]=j(t,async n=>n?(await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${n.lat()},${n.lng()}&key=AIzaSyBbM5TgyoeWwvUG5F0PGJXLR37qOzSCf7s`)).json()).results[0].address_components.filter(d=>d.types.includes("political")).reverse().slice(0,3).reverse().map(d=>d.short_name).join(", "):void 0);return[(()=>{const n=g(Le),l=n.firstChild,a=l.nextSibling,u=a.firstChild,[d,$]=I(u.nextSibling),A=d.nextSibling,[B,J]=I(A.nextSibling);return b(a,k(N,{get children(){const c=g(Re);return b(c,z),c}}),d,$),b(a,k(N,{get fallback(){return g(He)},get children(){return k($e,{get when(){return f()},get children(){return[(()=>{const c=g(Me),w=c.firstChild,_=w.firstChild,y=_.nextSibling,S=y.firstChild;return E(C=>p(S,`left: ${Math.round(f().malariaIndexValue*100)}%`,C)),c})(),(()=>{const c=g(Te),w=c.firstChild,_=w.firstChild,y=_.nextSibling,S=y.firstChild,C=S.nextSibling,U=C.firstChild,R=w.nextSibling,X=R.firstChild,P=X.nextSibling,G=P.firstChild,W=G.nextSibling,K=W.firstChild,M=R.nextSibling,Q=M.firstChild,Y=Q.nextSibling,Z=Y.firstChild,te=Z.nextSibling,re=te.firstChild,T=M.nextSibling,ie=T.firstChild,ne=ie.nextSibling,se=ne.firstChild,le=se.nextSibling,ae=le.firstChild,oe=T.nextSibling,de=oe.firstChild,ce=de.nextSibling,fe=ce.firstChild,he=fe.nextSibling,ue=he.firstChild;return E(o=>{const ge=`left: ${Math.round(f().ndviValue*50)+50}%`,pe=`left: ${Math.round(f().populationValue*100)}%`,ve=`left: ${Math.round(f().rainfallValue*100)}%`,xe=`left: ${Math.round(f().LSTValue*100)}%`,me=`left: ${Math.round(f().canopyCoverValue*100)}%`;return o._v$=p(U,ge,o._v$),o._v$2=p(K,pe,o._v$2),o._v$3=p(re,ve,o._v$3),o._v$4=p(ae,xe,o._v$4),o._v$5=p(ue,me,o._v$5),o},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),c})()]}})}}),B,J),n})(),(()=>{const n=g(qe),l=n.firstChild,a=l.firstChild,u=l.nextSibling,d=u.firstChild;return a.addEventListener("change",$=>e($.currentTarget.value)),b(d,()=>new Date().toLocaleDateString()),E(()=>a.value=i()),n})()]}export{Ne as default};
